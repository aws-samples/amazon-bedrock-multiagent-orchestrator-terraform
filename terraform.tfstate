{
  "version": 4,
  "terraform_version": "1.5.7",
  "serial": 22,
  "lineage": "71b5bbce-ec84-24c9-5d81-c89dadcc0e9a",
  "outputs": {
    "agent_state_table_name": {
      "value": "multi-agent-ai-agent-state",
      "type": "string"
    },
    "child_agent_ids": {
      "value": {
        "0": "ODVDLYHXOA",
        "1": "ERKJJNWYFS",
        "2": "1PNB4EEUUE"
      },
      "type": [
        "object",
        {
          "0": "string",
          "1": "string",
          "2": "string"
        }
      ]
    },
    "invoke_instructions": {
      "value": "To invoke the multi-agent system, use the AWS Step Functions StartExecution API with the following input:\n    \n{\n  \"sessionId\": \"unique-session-id\",\n  \"userInput\": \"Your query or request here\"\n}\n    \nExample AWS CLI command:\n    \naws stepfunctions start-execution \\\\\n  --state-machine-arn arn:aws:states:us-east-1:631124062155:stateMachine:multi-agent-ai-orchestrator \\\\\n  --input '{\"sessionId\": \"session-123\", \"userInput\": \"Your query or request here\"}'\n",
      "type": "string"
    },
    "orchestrator_state_machine_arn": {
      "value": "arn:aws:states:us-east-1:631124062155:stateMachine:multi-agent-ai-orchestrator",
      "type": "string"
    },
    "supervisor_agent_id": {
      "value": "0ORIPXKOEE",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "aws_bedrockagent_agent",
      "name": "child_agents",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "0",
          "schema_version": 0,
          "attributes": {
            "agent_arn": "arn:aws:bedrock:us-east-1:631124062155:agent/ODVDLYHXOA",
            "agent_collaboration": "DISABLED",
            "agent_id": "ODVDLYHXOA",
            "agent_name": "multi-agent-ai-child-1",
            "agent_resource_role_arn": "arn:aws:iam::631124062155:role/multi-agent-ai-agent-role",
            "agent_version": null,
            "customer_encryption_key_arn": null,
            "description": "Child agent 1 specialized in Data Analysis",
            "foundation_model": "anthropic.claude-3-sonnet-20240229-v1:0",
            "guardrail_configuration": null,
            "id": "ODVDLYHXOA",
            "idle_session_ttl_in_seconds": 600,
            "instruction": "You are a specialized agent focused on data analysis. Your responsibilities include:\n1. Analyzing data patterns and providing insights\n2. Creating data visualizations and reports\n3. Recommending data-driven solutions\n      \nWhen the supervisor agent delegates a task to you, focus on delivering high-quality data analysis.\n",
            "memory_configuration": null,
            "prepare_agent": true,
            "prompt_override_configuration": [
              {
                "override_lambda": null,
                "prompt_configurations": null
              }
            ],
            "skip_resource_in_use_check": false,
            "tags": {
              "AgentType": "Child",
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Specialty": "Data Analysis",
              "Terraform": "true"
            },
            "tags_all": {
              "AgentType": "Child",
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Specialty": "Data Analysis",
              "Terraform": "true"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "aws_iam_role.agent_role"
          ]
        },
        {
          "index_key": "1",
          "schema_version": 0,
          "attributes": {
            "agent_arn": "arn:aws:bedrock:us-east-1:631124062155:agent/ERKJJNWYFS",
            "agent_collaboration": "DISABLED",
            "agent_id": "ERKJJNWYFS",
            "agent_name": "multi-agent-ai-child-2",
            "agent_resource_role_arn": "arn:aws:iam::631124062155:role/multi-agent-ai-agent-role",
            "agent_version": null,
            "customer_encryption_key_arn": null,
            "description": "Child agent 2 specialized in Code Generation",
            "foundation_model": "anthropic.claude-3-sonnet-20240229-v1:0",
            "guardrail_configuration": null,
            "id": "ERKJJNWYFS",
            "idle_session_ttl_in_seconds": 600,
            "instruction": "You are a specialized agent focused on code generation. Your responsibilities include:\n1. Writing clean, efficient code based on requirements\n2. Debugging and optimizing existing code\n3. Providing code explanations and documentation\n      \nWhen the supervisor agent delegates a task to you, focus on delivering high-quality code solutions.\n",
            "memory_configuration": null,
            "prepare_agent": true,
            "prompt_override_configuration": [
              {
                "override_lambda": null,
                "prompt_configurations": null
              }
            ],
            "skip_resource_in_use_check": false,
            "tags": {
              "AgentType": "Child",
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Specialty": "Code Generation",
              "Terraform": "true"
            },
            "tags_all": {
              "AgentType": "Child",
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Specialty": "Code Generation",
              "Terraform": "true"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "aws_iam_role.agent_role"
          ]
        },
        {
          "index_key": "2",
          "schema_version": 0,
          "attributes": {
            "agent_arn": "arn:aws:bedrock:us-east-1:631124062155:agent/1PNB4EEUUE",
            "agent_collaboration": "DISABLED",
            "agent_id": "1PNB4EEUUE",
            "agent_name": "multi-agent-ai-child-3",
            "agent_resource_role_arn": "arn:aws:iam::631124062155:role/multi-agent-ai-agent-role",
            "agent_version": null,
            "customer_encryption_key_arn": null,
            "description": "Child agent 3 specialized in Infrastructure Planning",
            "foundation_model": "anthropic.claude-3-sonnet-20240229-v1:0",
            "guardrail_configuration": null,
            "id": "1PNB4EEUUE",
            "idle_session_ttl_in_seconds": 600,
            "instruction": "You are a specialized agent focused on infrastructure planning. Your responsibilities include:\n1. Designing AWS architecture solutions\n2. Creating infrastructure as code templates\n3. Optimizing for cost, performance, and security\n      \nWhen the supervisor agent delegates a task to you, focus on delivering high-quality infrastructure solutions.\n",
            "memory_configuration": null,
            "prepare_agent": true,
            "prompt_override_configuration": [
              {
                "override_lambda": null,
                "prompt_configurations": null
              }
            ],
            "skip_resource_in_use_check": false,
            "tags": {
              "AgentType": "Child",
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Specialty": "Infrastructure Planning",
              "Terraform": "true"
            },
            "tags_all": {
              "AgentType": "Child",
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Specialty": "Infrastructure Planning",
              "Terraform": "true"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "aws_iam_role.agent_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_bedrockagent_agent",
      "name": "supervisor",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "agent_arn": "arn:aws:bedrock:us-east-1:631124062155:agent/0ORIPXKOEE",
            "agent_collaboration": "DISABLED",
            "agent_id": "0ORIPXKOEE",
            "agent_name": "multi-agent-ai-supervisor",
            "agent_resource_role_arn": "arn:aws:iam::631124062155:role/multi-agent-ai-agent-role",
            "agent_version": null,
            "customer_encryption_key_arn": null,
            "description": "Supervisor agent that handles initial interactions and delegates to specialized child agents",
            "foundation_model": "anthropic.claude-3-sonnet-20240229-v1:0",
            "guardrail_configuration": null,
            "id": "0ORIPXKOEE",
            "idle_session_ttl_in_seconds": 600,
            "instruction": "You are a supervisor agent responsible for:\n1. Initial interaction with users to understand their request\n2. Determining which specialized child agent should handle the request\n3. Delegating tasks to appropriate child agents\n4. Synthesizing responses from child agents when needed\n5. Maintaining conversation context and ensuring a coherent user experience\n    \nWhen a user request comes in, first analyze it to determine which child agent is best suited to handle it.\nThen, prepare the necessary context and delegate to that agent.\n",
            "memory_configuration": null,
            "prepare_agent": true,
            "prompt_override_configuration": [
              {
                "override_lambda": null,
                "prompt_configurations": null
              }
            ],
            "skip_resource_in_use_check": false,
            "tags": {
              "AgentType": "Supervisor",
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "tags_all": {
              "AgentType": "Supervisor",
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "aws_iam_role.agent_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "agent_state",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:631124062155:table/multi-agent-ai-agent-state",
            "attribute": [
              {
                "name": "SessionId",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [],
            "hash_key": "SessionId",
            "id": "multi-agent-ai-agent-state",
            "import_table": [],
            "local_secondary_index": [],
            "name": "multi-agent-ai-agent-state",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": null,
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "ExpirationTime",
                "enabled": true
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "agent_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::631124062155:policy/multi-agent-ai-agent-policy",
            "attachment_count": 1,
            "description": "Policy for Bedrock agents to access required resources",
            "id": "arn:aws:iam::631124062155:policy/multi-agent-ai-agent-policy",
            "name": "multi-agent-ai-agent-policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"bedrock:InvokeModel\",\"bedrock:InvokeAgent\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:Query\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-east-1:631124062155:table/multi-agent-ai-agent-state\"},{\"Action\":[\"lambda:InvokeFunction\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAZF4PM57FUIUMAD7FD",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_bedrockagent_agent.child_agents",
            "aws_dynamodb_table.agent_state",
            "aws_iam_role.agent_role",
            "aws_iam_role.lambda_role",
            "aws_lambda_function.agent_router"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::631124062155:policy/multi-agent-ai-lambda-policy",
            "attachment_count": 1,
            "description": "Policy for Lambda functions in the multi-agent system",
            "id": "arn:aws:iam::631124062155:policy/multi-agent-ai-lambda-policy",
            "name": "multi-agent-ai-lambda-policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"},{\"Action\":[\"bedrock:InvokeAgent\",\"bedrock:InvokeModel\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:Query\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-east-1:631124062155:table/multi-agent-ai-agent-state\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAZF4PM57F2LE5GIRE6",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.agent_state"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "step_function_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::631124062155:policy/multi-agent-ai-step-function-policy",
            "attachment_count": 1,
            "description": "Policy for Step Functions in the multi-agent system",
            "id": "arn:aws:iam::631124062155:policy/multi-agent-ai-step-function-policy",
            "name": "multi-agent-ai-step-function-policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"lambda:InvokeFunction\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router\"},{\"Action\":[\"bedrock:InvokeAgent\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-east-1:631124062155:table/multi-agent-ai-agent-state\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAZF4PM57FTMNWYMNNH",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_bedrockagent_agent.child_agents",
            "aws_dynamodb_table.agent_state",
            "aws_iam_role.agent_role",
            "aws_iam_role.lambda_role",
            "aws_lambda_function.agent_router"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "agent_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::631124062155:role/multi-agent-ai-agent-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"bedrock.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-04-22T09:52:56Z",
            "description": "",
            "force_detach_policies": false,
            "id": "multi-agent-ai-agent-role",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::631124062155:policy/multi-agent-ai-agent-policy"
            ],
            "max_session_duration": 3600,
            "name": "multi-agent-ai-agent-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "unique_id": "AROAZF4PM57FSB7OTNM2B"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::631124062155:role/multi-agent-ai-lambda-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-04-22T09:52:56Z",
            "description": "",
            "force_detach_policies": false,
            "id": "multi-agent-ai-lambda-role",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::631124062155:policy/multi-agent-ai-lambda-policy"
            ],
            "max_session_duration": 3600,
            "name": "multi-agent-ai-lambda-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "unique_id": "AROAZF4PM57FVPA77MOUP"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "step_function_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::631124062155:role/multi-agent-ai-step-function-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-04-22T09:52:56Z",
            "description": "",
            "force_detach_policies": false,
            "id": "multi-agent-ai-step-function-role",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::631124062155:policy/multi-agent-ai-step-function-policy"
            ],
            "max_session_duration": 3600,
            "name": "multi-agent-ai-step-function-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "unique_id": "AROAZF4PM57F5JSLYPDCW"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "agent_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "multi-agent-ai-agent-role-20250422102532235400000001",
            "policy_arn": "arn:aws:iam::631124062155:policy/multi-agent-ai-agent-policy",
            "role": "multi-agent-ai-agent-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_bedrockagent_agent.child_agents",
            "aws_dynamodb_table.agent_state",
            "aws_iam_policy.agent_policy",
            "aws_iam_role.agent_role",
            "aws_iam_role.lambda_role",
            "aws_lambda_function.agent_router"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "multi-agent-ai-lambda-role-20250422095306709700000005",
            "policy_arn": "arn:aws:iam::631124062155:policy/multi-agent-ai-lambda-policy",
            "role": "multi-agent-ai-lambda-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.agent_state",
            "aws_iam_policy.lambda_policy",
            "aws_iam_role.lambda_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "step_function_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "multi-agent-ai-step-function-role-20250422102532260100000002",
            "policy_arn": "arn:aws:iam::631124062155:policy/multi-agent-ai-step-function-policy",
            "role": "multi-agent-ai-step-function-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_bedrockagent_agent.child_agents",
            "aws_dynamodb_table.agent_state",
            "aws_iam_policy.step_function_policy",
            "aws_iam_role.agent_role",
            "aws_iam_role.lambda_role",
            "aws_iam_role.step_function_role",
            "aws_lambda_function.agent_router"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "agent_router",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router",
            "code_sha256": "adCcH9ujwYQOVfjyUCBxesyoKMqIUjYuJ+cWfKdQ1ZQ=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "CHILD_AGENTS": "{\"0\":\"ODVDLYHXOA\",\"1\":\"ERKJJNWYFS\",\"2\":\"1PNB4EEUUE\"}",
                  "STATE_TABLE": "multi-agent-ai-agent-state"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./lambda/agent_router.zip",
            "function_name": "multi-agent-ai-agent-router",
            "handler": "index.handler",
            "id": "multi-agent-ai-agent-router",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-04-22T10:30:09.000+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/multi-agent-ai-agent-router",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::631124062155:role/multi-agent-ai-lambda-role",
            "runtime": "nodejs18.x",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "adCcH9ujwYQOVfjyUCBxesyoKMqIUjYuJ+cWfKdQ1ZQ=",
            "source_code_size": 2143,
            "tags": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_bedrockagent_agent.child_agents",
            "aws_dynamodb_table.agent_state",
            "aws_iam_role.lambda_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_sfn_state_machine",
      "name": "agent_orchestrator",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:states:us-east-1:631124062155:stateMachine:multi-agent-ai-orchestrator",
            "creation_date": "2025-04-22T10:30:17Z",
            "definition": "{\n  \"Comment\": \"Multi-Agent Orchestration Workflow\",\n  \"StartAt\": \"ProcessInitialRequest\",\n  \"States\": {\n    \"ProcessInitialRequest\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router\",\n        \"Payload\": {\n          \"sessionId.$\": \"$.sessionId\",\n          \"userInput.$\": \"$.userInput\",\n          \"agentId\": \"0ORIPXKOEE\",\n          \"isInitialRequest\": true\n        }\n      },\n      \"ResultPath\": \"$.supervisorResponse\",\n      \"Next\": \"DetermineNextAgent\"\n    },\n    \"DetermineNextAgent\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router\",\n        \"Payload\": {\n          \"supervisorResponse.$\": \"$.supervisorResponse\",\n          \"sessionId.$\": \"$.sessionId\",\n          \"userInput.$\": \"$.userInput\"\n        }\n      },\n      \"ResultPath\": \"$.routerResult\",\n      \"Next\": \"SaveState\"\n    },\n    \"SaveState\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::dynamodb:putItem\",\n      \"Parameters\": {\n        \"TableName\": \"multi-agent-ai-agent-state\",\n        \"Item\": {\n          \"SessionId\": {\n            \"S.$\": \"$.sessionId\"\n          },\n          \"ConversationState\": {\n            \"S.$\": \"States.JsonToString($.routerResult.Payload)\"\n          },\n          \"LastUpdated\": {\n            \"S.$\": \"$$.State.EnteredTime\"\n          },\n          \"ExpirationTime\": {\n            \"N\": \"86400\"\n          }\n        }\n      },\n      \"Next\": \"InvokeChildAgent\"\n    },\n    \"InvokeChildAgent\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router\",\n        \"Payload\": {\n          \"sessionId.$\": \"$.sessionId\",\n          \"userInput.$\": \"$.routerResult.Payload.formattedPrompt\",\n          \"agentId.$\": \"$.routerResult.Payload.selectedAgentId\",\n          \"isChildAgent\": true\n        }\n      },\n      \"ResultPath\": \"$.childResponse\",\n      \"Next\": \"FormatFinalResponse\"\n    },\n    \"FormatFinalResponse\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"arn:aws:lambda:us-east-1:631124062155:function:multi-agent-ai-agent-router\",\n        \"Payload\": {\n          \"sessionId.$\": \"$.sessionId\",\n          \"userInput.$\": \"States.Format('Please format and present this response from the child agent to the user: {}', $.childResponse.Payload.response)\",\n          \"agentId\": \"0ORIPXKOEE\",\n          \"isFormatting\": true\n        }\n      },\n      \"ResultPath\": \"$.finalResponse\",\n      \"End\": true\n    }\n  }\n}\n",
            "description": "",
            "encryption_configuration": [
              {
                "kms_data_key_reuse_period_seconds": 0,
                "kms_key_id": "",
                "type": "AWS_OWNED_KEY"
              }
            ],
            "id": "arn:aws:states:us-east-1:631124062155:stateMachine:multi-agent-ai-orchestrator",
            "logging_configuration": [
              {
                "include_execution_data": false,
                "level": "OFF",
                "log_destination": ""
              }
            ],
            "name": "multi-agent-ai-orchestrator",
            "name_prefix": "",
            "publish": false,
            "revision_id": "",
            "role_arn": "arn:aws:iam::631124062155:role/multi-agent-ai-step-function-role",
            "state_machine_version_arn": "",
            "status": "ACTIVE",
            "tags": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "multi-agent-ai",
              "Terraform": "true"
            },
            "timeouts": null,
            "tracing_configuration": [
              {
                "enabled": false
              }
            ],
            "type": "STANDARD",
            "version_description": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_bedrockagent_agent.child_agents",
            "aws_bedrockagent_agent.supervisor",
            "aws_dynamodb_table.agent_state",
            "aws_iam_role.lambda_role",
            "aws_iam_role.step_function_role",
            "aws_lambda_function.agent_router"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
